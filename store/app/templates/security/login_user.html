{% set title = title|default(_fsdomain('Login')) %}
{% extends "base-slim.html" %}
{% from "security/_macros.html" import render_field_with_errors, render_field, render_field_errors, render_form_errors, prop_next %}

{% block content %}
{% include "security/_messages.html" %}
<div class="text-center mb-4">
  <a href="." class="h2 navbar-brand navbar-brand-autodark">
    Casino Colegio
  </a>
</div>
<h2 class="h3 text-center mb-3">{{ _fsdomain('Login') }}</h2>
<form action="{{ url_for_security('login') }}{{ prop_next() }}" method="post" name="login_user_form">
  {{ login_user_form.hidden_tag() }}

  {{ render_form_errors(login_user_form) }}

  <div class="mb-3">
    <label class="form-label">Email address</label>
    <input type="email" class="form-control" id="email" name="email" placeholder="your@email.com" autocomplete="email" />
  </div>

  <div class="mb-2">
    <label class="form-label">
      {{ _fsdomain('Password') }}
      <span class="form-label-description">
        <a href="{{ url_for_security('forgot_password') }}">Recover Password</a>
      </span>
    </label>
    <div class="input-group input-group-flat">
      <input type="password" id="password" name="password" class="form-control" placeholder="Your password" autocomplete="current-password" />
      <span class="input-group-text">
        <a href="#" class="link-secondary" title="Show password" data-bs-toggle="tooltip"><!-- Download SVG icon from http://tabler.io/icons/icon/eye -->
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false" class="icon icon-1">
            <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
            <path d="M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6" />
          </svg></a>
      </span>
    </div>
  </div>
  <div class="mb-2">
    <label class="form-check">
      <input type="checkbox" class="form-check-input" value="y" id="remember" name="remember" />
      <span class="form-check-label">Remember me on this device</span>
    </label>
  </div>

  <div class="form-footer" id="submit-ctr">
    {{ render_field_errors(login_user_form.csrf_token) }}
    <button type="submit" class="btn btn-primary w-100" name="sbumit" id="submit">{{ _fsdomain('Login') }}</button>
  </div>
</form>

{% if security.webauthn %}
<hr class="fs-gap">
<h2>{{ _fsdomain("Use a Passkey to Sign In") }}</h2>
<div>
  <form method="get" id="wan_signin_form" name="wan_signin_form">
    <input id="wan_signin" name="wan_signin" type="submit" value="{{ _fsdomain('Sign in with a passkey') }}" formaction="{{ url_for_security('wan_signin') }}{{ prop_next() }}">
  </form>
</div>
{% endif %}

{% if security.oauthglue %}
<hr class="fs-gap">
<h2>{{ _fsdomain("Use Social Oauth to Sign In") }}</h2>
{% for provider in security.oauthglue.provider_names %}
<div class="fs-gap">
  <form method="post" id="{{ provider }}_form" name="{{ provider }}_form">
    <input id="{{ provider }}" name="{{ provider }}" type="submit" value="{{ _fsdomain('Sign in with %(provider)s', provider=provider) }}" formaction="{{ url_for_security('oauthstart', name=provider) }}{{ prop_next() }}">
    {% if csrf_token is defined %}
    <input id="{{ provider }}_csrf_token" name="{{ provider }}_csrf_token" type="hidden" value="{{ csrf_token() }}">
    {% endif %}
  </form>
</div>
{% endfor %}
{% endif %}

{% endblock content %}
